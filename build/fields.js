(()=>{"use strict";const e=window.React,l=window.wc.blocksCheckout,o=window.wp.element,t=window.wp.components,n=window.wp.i18n,a=window.wp.data,i=window.lodash,s=({checkoutExtensionData:s,extensions:c,section:r,inputs:m})=>{const{setExtensionData:p}=s,d=(0,o.useCallback)((0,i.debounce)(((e,l,o)=>{p(e,l,o)}),1e3),[p]),{setValidationErrors:k,clearValidationErrors:u}=(0,a.useDispatch)("wc/store/validation");(0,o.useCallback)((0,i.debounce)((e=>{u(e)}),300),[u]),(0,o.useCallback)((0,i.debounce)((e=>{k(e)}),300),[k]);var b={};m.map((e=>{b[e.name]="textarea"===e.type?"":e.defaultValue}));const[h,w]=(0,o.useState)(b);var y={};const f=(0,a.useSelect)((e=>{const l=e("wc/store/validation"),o={};return m.map((e=>{o[e.name]=l.getValidationError(e.name)})),o}));return(0,o.useEffect)((()=>{d("silkypress-input-field-block",r,h);var e=[];m.map((l=>{var o=!0;l.minlength&&h[l.name].length<l.minlength[0]&&(y[l.name]={message:l.minlength[1],hidden:!0},o=!1),l.maxlength&&h[l.name].length>l.maxlength[0]&&(y[l.name]={message:l.maxlength[1],hidden:!0},o=!1),!l.required||""!==h[l.name]&&!1!==h[l.name]||(y[l.name]={message:(0,n.__)("Please fill this field","silkypress-input-field-block"),hidden:!0},o=!1),o&&f[l.name]&&e.push(l.name)})),u(e),k(y)}),[d,h,f,k,u]),(0,e.createElement)("div",{className:"silkypress-input-field-area"},m.map((o=>{let a=void 0!==f[o.name]&&!f[o.name]?.hidden;return["text","number","email","url"].includes(o.type)?(0,e.createElement)(l.ValidatedTextInput,{key:o.name,instanceId:"0",accept:"image/*",type:o.type,className:"silkypress-input-field-block",value:h[o.name],id:o.name,help:o.extra,label:o.required?o.label:o.label+(0,n.__)(" (optional)","silkypress-input-field-block"),onChange:e=>{w({...h,[o.name]:e})},onBlur:e=>{}}):"checkbox"===o.type?(0,e.createElement)(e.Fragment,{key:"key-"+o.name},(0,e.createElement)("div",{className:"silkypress-input-field-block"+(a?" has-error":"")},(0,e.createElement)(l.CheckboxControl,{key:o.name,id:o.name,className:"wc-block-components-checkbox",label:o.required?o.label:o.label+(0,n.__)(" (optional)","silkypress-input-field-block"),checked:h[o.name],help:o.extra,onChange:e=>{w({...h,[o.name]:e})}}),a&&(0,e.createElement)("div",{className:"wc-block-components-validation-error",key:"error-"+o.name},f[o.name]?.message))):"select"===o.type?(0,e.createElement)(e.Fragment,{key:"key-"+o.name},(0,e.createElement)("div",{className:"silkypress-input-field-block silkypress-with-hidden-input"+(a?" has-error":"")},a&&(0,e.createElement)(t.__experimentalInputControl,{value:"a",className:"silkypress-hidden-input"}),(0,e.createElement)(t.SelectControl,{key:o.name,id:o.name,className:"wc-block-components-select",label:o.required?o.label:o.label+(0,n.__)(" (optional)","silkypress-input-field-block"),options:o.options,help:o.extra,value:h[o.name],onChange:e=>{w({...h,[o.name]:e})},onBlur:e=>{},__nextHasNoMarginBottom:!0}),a&&(0,e.createElement)("div",{className:"wc-block-components-validation-error",key:"error-"+o.name},f[o.name]?.message))):"radio"===o.type?(0,e.createElement)(e.Fragment,{key:"key-"+o.name},(0,e.createElement)("div",{className:"silkypress-input-field-block"+(a?" has-error":"")},(0,e.createElement)(t.RadioControl,{key:o.name,id:o.name,label:o.required?o.label:o.label+(0,n.__)(" (optional)","silkypress-input-field-block"),selected:h[o.name],help:o.extra,options:o.options,onChange:e=>{w({...h,[o.name]:e})},onBlur:e=>{}}),a&&(0,e.createElement)("div",{className:"wc-block-components-validation-error",key:"error-"+o.name},f[o.name]?.message))):"textarea"===o.type?(0,e.createElement)(e.Fragment,{key:"key-"+o.name},(0,e.createElement)("div",{className:"silkypress-input-field-block silkypress-with-hidden-input"+(a?" has-error":"")},a&&(0,e.createElement)(t.__experimentalInputControl,{value:"a",className:"silkypress-hidden-input"}),(0,e.createElement)(t.TextareaControl,{key:o.name,instanceId:o.name,className:"silkypress-input-field-textarea"+(a?" has-error":""),placeholder:o.defaultValue,value:h[o.name],id:o.name,help:o.extra,rows:"2",label:o.required?o.label:o.label+(0,n.__)(" (optional)","silkypress-input-field-block"),onChange:e=>{w({...h,[o.name]:e})},onBlur:e=>{}}),a&&(0,e.createElement)("div",{className:"wc-block-components-validation-error",key:"error-"+o.name},f[o.name]?.message))):void 0})))},c="fields";(0,l.registerCheckoutBlock)({metadata:{apiVersion:2,name:"silkypress/input-field-fields",version:"1.0.0",title:"Input Field",category:"woocommerce",description:"Add custom input fields to the Fields checkout inner block.",supports:{html:!1,align:!1,multiple:!0,reusable:!0},parent:["woocommerce/checkout-fields-block"],textdomain:"silkypress-input-field-block"},component:({checkoutExtensionData:l,extensions:o})=>(0,e.createElement)(s,{checkoutExtensionData:l,extensions:o,inputs:wcSettings["silkypress-input-field-block_data"].filter((e=>e.section===c)),section:c}),force:!0});var r=[".wp-block-woocommerce-checkout-actions-block",".wp-block-woocommerce-checkout-terms-block",".wp-block-woocommerce-checkout-order-note-block",".wp-block-woocommerce-checkout-additional-information-block",".wp-block-woocommerce-checkout-payment-block",".wp-block-woocommerce-checkout-shipping-methods-block",".wp-block-woocommerce-checkout-billing-address-block",".wp-block-woocommerce-checkout-shipping-address-block",".wp-block-woocommerce-checkout-pickup-options-block",".wp-block-woocommerce-checkout-shipping-method-block",".wp-block-woocommerce-checkout-contact-information-block",".wp-block-woocommerce-checkout-express-payment-block"];window.addEventListener("load",(function(){wcSettings["silkypress-input-field-block_data"].filter((e=>e.section===c)).map((e=>{if(null!==typeof e.previous){var l=document.querySelector("#"+e.name).closest(".silkypress-input-field-block");if("string"==typeof e.previous){if(e.previous.includes("silkypress/"))document.querySelector("#"+e.previous.replace("silkypress/","")).closest(".wp-block-silkypress-input-field").appendChild(l);else if(e.previous.includes("woocommerce/")){let t=".wp-block-"+e.previous.replace("/","-");if(!document.querySelector(t)){var o=r.indexOf(t);for(o++;null!==r[o];){if(null!==document.querySelector(r[o])){t=r[o];break}o++}}let n=document.querySelector(t);return n.nextElementSibling.classList.contains("wp-block-silkypress-input-field")||n.parentNode.insertBefore(document.createElement("div.wp-block-silkypress-input-field"),n.nextSibling),void n.nextElementSibling.appendChild(l)}}else document.querySelector(".wp-block-silkypress-input-field").appendChild(l)}}))}))})();